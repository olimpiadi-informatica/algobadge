(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(6323)}])},6323:function(e,n,r){"use strict";r.r(n),r.d(n,{__N_SSG:function(){return F},default:function(){return J}});var t=r(5893),i=r(885),a=r(4408),o=r.n(a),s=r(9655),l=r(7294),c=r(9519),u=r(8918),d=r(4162),f=r(3489);function h(e){var n=e.category,r=function(e){var n,r=e.task,a=e.score,o=e.url,s=null!==(n=r.maxScore)&&void 0!==n?n:i.lb,l="".concat((0,u.N)(a,1)," / ").concat(s);return(0,t.jsxs)("li",{children:[(0,t.jsx)("a",{href:o,rel:"noreferrer",target:"_blank",children:r.name})," ",r.terry?(0,t.jsx)(d.Z,{overlay:(0,t.jsxs)(f.Z,{children:["Punteggio del problema scalato su ",s," punti."]}),children:(0,t.jsxs)("span",{children:[l,"*"]})}):l]})};return(0,t.jsx)("ul",{children:n.node.tasks.map((function(e){return(0,t.jsx)(r,{task:e,score:n.tasks[e.name],url:n.taskURLs[e.name]},e.name)}))})}function v(e){var n,r,a=e.badge,l=e.badges,u=a.node.prerequisites.map((function(e){return l[e].node.tasks.reduce((function(e,r){return e+(null!==(n=r.maxScore)&&void 0!==n?n:i.lb)}),0)})),d=a.node.tasks.reduce((function(e,n){return e+(null!==(r=n.maxScore)&&void 0!==r?r:i.lb)}),0),f=Object.values(l).filter((function(e){return e.node.prerequisites.includes(a.node.id)})).map((function(e){return e.node.id}));return(0,t.jsxs)("div",{className:o().category,children:[(0,t.jsx)("h2",{className:o().title,children:a.node.title}),"locked"!==a.badge?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.E,{score:a.score,maxScore:d,nextCategories:f}),(0,t.jsx)("div",{className:o().taskList,children:(0,t.jsx)(h,{category:a})}),(0,t.jsx)("div",{className:o().resources,children:(0,t.jsx)(s.D,{components:{h1:"h3",h2:"h4",h3:"h5",h4:"h6"},children:a.node.resources_md})})]}):(0,t.jsxs)("p",{children:["Questa categoria \xe8 bloccata! Totalizza almeno"," ",u[0]*i.Lw," punti in"," ",(0,t.jsx)("code",{children:a.node.prerequisites})," per sbloccarla."]})]})}var m=r(2914),g=r.n(m);function _(e){var n=e.url,r=n.startsWith("https://")?n:"https:".concat(n);return(0,t.jsx)("img",{className:g().profilePicture,src:r,alt:""})}var p=r(1829),x=r.n(p),b=r(4184),j=r.n(b),y=r(1949),N=r.n(y);function k(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function w(e){var n=e.badge,r="diamond"===n,i=r||"gold"===n,a=i||"silver"===n,o=a||"bronze"===n;return(0,t.jsxs)("span",{className:N().title,children:[(0,t.jsx)("span",{className:j()(N().initial,k({},N().hasSilver,a)),children:"A"}),"LG",(0,t.jsx)("span",{className:j()(k({},N().hasGold,i)),children:"O"}),(0,t.jsx)("span",{className:j()(N().initial,k({},N().hasBronze,o)),children:"B"}),"A",(0,t.jsx)("span",{className:j()(k({},N().hasDiamond,r)),children:"D"}),"GE"]})}function S(e){var n=e.user,r=e.badge,a=e.impersonated;return(0,t.jsxs)("div",{className:x().header,children:[(0,t.jsxs)("div",{className:x().title,children:[(0,t.jsx)(w,{badge:r})," ",(0,t.jsx)(c.h,{color:(0,i.Cj)(r)})]}),"Ciao"," ",(0,t.jsx)(_,{url:"//gravatar.com/avatar/".concat(n.mail_hash,"?d=identicon")}),(0,t.jsxs)("strong",{children:[n.first_name," ",n.last_name]}),"!"," ",a?(0,t.jsx)("em",{children:"(impersonato)"}):(0,t.jsxs)("em",{children:["(Login effettuato tramite"," ",(0,t.jsx)("a",{href:"https://training.olinfo.it",children:"training.olinfo.it"}),")"]})]})}var C=r(8707),E=r.n(C);function T(){return(0,t.jsxs)("div",{className:E().loading,children:[(0,t.jsx)("img",{src:"/loading.gif",alt:"Loading..."}),"caricamento..."]})}function P(){return(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{children:"Login richiesto"}),(0,t.jsxs)("p",{children:["Per usare algobadge devi essere loggato su"," ",(0,t.jsx)("a",{href:"https://training.olinfo.it/",children:"https://training.olinfo.it/"})]})]})}var O=r(5532),z=r.n(O),L=function(e){var n=e.getBoundingClientRect();return{left:n.left+window.pageXOffset,top:n.top+window.pageYOffset,width:n.width||e.offsetWidth,height:n.height||e.offsetHeight}};function q(e){var n=e.start,r=e.end,i=L(n),a=L(r),o=i.left+i.width/2,s=i.top+i.height/2,l=a.left+a.width/2,c=a.top+a.height/2,u=Math.sqrt((l-o)*(l-o)+(c-s)*(c-s)),d=(o+l)/2-u/2,f=(s+c)/2-1,h=Math.atan2(s-c,o-l)*(180/Math.PI),v={"--color":"black","--thickness":"".concat(2,"px"),"--cx":"".concat(d,"px"),"--cy":"".concat(f,"px"),"--length":"".concat(u,"px"),"--angle":"".concat(h,"deg")};return(0,t.jsx)("div",{className:z().line,style:v})}var A=r(695),R=r.n(A),G={locked:"#eee",none:"#fff",bronze:"#cd7f32",silver:"#c0c0c0",gold:"#ffdf00",diamond:"#94ebff"},I={locked:"#bbb",none:"#000",bronze:"#523214",silver:"#4c4c4c",gold:"#665900",diamond:"#000"};function B(e){var n,r=e.node,a=e.onClick,o={"--row":r.node.position[1],"--column":r.node.position[0],"--color":G[r.badge],"--text-color":I[r.badge]},s=r.node.tasks.reduce((function(e,r){return e+(null!==(n=r.maxScore)&&void 0!==n?n:i.lb)}),0);return(0,t.jsx)("div",{className:R().node,style:o,children:(0,t.jsxs)("button",{"data-node-id":r.node.id,className:R().badge,onClick:a,children:[(0,t.jsx)("div",{className:R().badgeName,children:r.node.id}),(0,t.jsxs)("div",{className:R().score,children:[(0,u.N)(r.score,1)," / ",s]})]})})}function M(e){var n=e.badges,r=e.setSelectedNode,i=(0,l.useRef)(null),a=(0,l.useState)(null),o=a[0],s=a[1],c=(0,l.useState)([]),u=c[0],d=c[1];(0,l.useEffect)((function(){if(null!==i.current){var e=i.current.querySelectorAll(".".concat(R().badge)),n=Object.fromEntries(Array.from(e.values()).map((function(e){return[e.getAttribute("data-node-id"),e]})));s(n)}}),[]);var f=(0,l.useCallback)((function(){if(o){var e=[],r=!0,t=!1,i=void 0;try{for(var a,s=Object.values(n)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var l=a.value,c=!0,u=!1,f=void 0;try{for(var h,v=l.node.prerequisites[Symbol.iterator]();!(c=(h=v.next()).done);c=!0){var m=h.value,g=o[l.node.id],_=o[m];e.push({id:"".concat(l.node.id,"-").concat(m),start:g,end:_})}}catch(p){u=!0,f=p}finally{try{c||null==v.return||v.return()}finally{if(u)throw f}}}}catch(p){t=!0,i=p}finally{try{r||null==s.return||s.return()}finally{if(t)throw i}}d(e)}}),[n,o]);(0,l.useEffect)((function(){f()}),[n,f]),(0,l.useEffect)((function(){return window.addEventListener("resize",f),function(){return window.removeEventListener("resize",f)}}),[f]);var h=Object.values(n);return(0,t.jsxs)("div",{className:R().tree,ref:i,children:[h.map((function(e){return(0,t.jsx)(B,{node:e,onClick:function(){return r(e.node.id)}},e.node.id)})),u.map((function(e){return(0,t.jsx)(q,{start:e.start,end:e.end},e.id)}))]})}var W=r(6489),Y=r(1163);function D(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function U(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,i,a=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(t=r.next()).done)&&(a.push(t.value),!n||a.length!==n);o=!0);}catch(l){s=!0,i=l}finally{try{o||null==r.return||r.return()}finally{if(s)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return D(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(){var e=(0,Y.useRouter)(),n=(0,l.useState)(void 0),r=n[0],t=n[1];return(0,l.useEffect)((function(){if(e.isReady)if(e.query.impersonate){var n={username:e.query.impersonate,impersonated:!0};console.log("Impersonating",n),t(n)}else{var r=function(){var e=W.parse(window.document.cookie);if(!e.token)return null;var n=U(e.token.split("."),3),r=(n[0],n[1]);n[2];try{var t=r.replace(/-/g,"+").replace(/_/g,"/"),i=atob(t);return JSON.parse(i)}catch(a){return null}}();console.log("User is",r),t(r)}}),[e.query.impersonate,e.isReady]),r}var H=r(2106),F=!0;function J(e){var n,r,a=e.taskGraph,o=(0,Y.useRouter)(),s=X(),c=(0,l.useState)(void 0),u=c[0],d=c[1],f=(0,l.useState)(null!==(r=null===(n=a.nodes.find((function(e){return 0===e.prerequisites.length})))||void 0===n?void 0:n.id)&&void 0!==r?r:""),h=f[0],m=f[1];if((0,l.useEffect)((function(){null===s&&d(null),s&&(0,H.b)(s.username,a).then((function(e){return d(e)}))}),[s,a]),void 0===s||void 0===u)return(0,t.jsx)(T,{});if(null===s||null===u)return(0,t.jsx)(P,{});var g="true"===o.query.unlock,_=(0,i.Yf)(a,u,g),p=(0,i.Pb)(_);return(0,t.jsxs)("div",{children:[(0,t.jsx)(S,{user:u,badge:p,impersonated:s.impersonated}),(0,t.jsx)(M,{badges:_,setSelectedNode:m}),h in _&&(0,t.jsx)(v,{badge:_[h],badges:_})]})}},4408:function(e){e.exports={category:"Category_category__yzdBd",title:"Category_title__8klu6",taskList:"Category_taskList__uYCvW",resources:"Category_resources__dqPOc"}},1829:function(e){e.exports={header:"Header_header__RW35m",title:"Header_title__GPS8b"}},2914:function(e){e.exports={profilePicture:"ProfilePicture_profilePicture__YaIyJ"}},8707:function(e){e.exports={loading:"Loading_loading__PXEn4"}},1949:function(e){e.exports={title:"Title_title__CfOW_",initial:"Title_initial__TIYiy",hasDiamond:"Title_hasDiamond__x4MaL",hasGold:"Title_hasGold__zVY3T",hasSilver:"Title_hasSilver__E28iz",hasBronze:"Title_hasBronze__96yho"}},5532:function(e){e.exports={line:"Line_line__C9XiF"}},695:function(e){e.exports={tree:"Tree_tree__UfTc3",node:"Tree_node__fgN5z",badge:"Tree_badge__VAWxQ",badgeName:"Tree_badgeName__UP_Ry",score:"Tree_score__RxP9M"}}},function(e){e.O(0,[592,751,499,774,888,179],(function(){return n=5301,e(e.s=n);var n}));var n=e.O();_N_E=n}]);