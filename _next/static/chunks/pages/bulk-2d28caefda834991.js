(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[294],{7137:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/bulk",function(){return n(8820)}])},8820:function(e,r,n){"use strict";n.r(r),n.d(r,{__N_SSG:function(){return B},default:function(){return T}});var t=n(5893),a=n(9519),o=n(885),l=n(2106),s=n(7294),i=n(4184),d=n.n(i),u=(n(2473),n(5697)),c=n.n(u);const m={type:c().string,tooltip:c().bool,as:c().elementType},f=s.forwardRef((({as:e="div",className:r,type:n="valid",tooltip:a=!1,...o},l)=>(0,t.jsx)(e,{...o,ref:l,className:d()(r,`${n}-${a?"tooltip":"feedback"}`)})));f.displayName="Feedback",f.propTypes=m;var b=f;var h=s.createContext({}),v=n(6792);const j=s.forwardRef((({bsPrefix:e,type:r,size:n,htmlSize:a,id:o,className:l,isValid:i=!1,isInvalid:u=!1,plaintext:c,readOnly:m,as:f="input",...b},j)=>{const{controlId:y}=(0,s.useContext)(h);let p;return e=(0,v.vE)(e,"form-control"),p=c?{[`${e}-plaintext`]:!0}:{[e]:!0,[`${e}-${n}`]:n},(0,t.jsx)(f,{...b,type:r,size:a,ref:j,readOnly:m,id:o||y,className:d()(l,p,i&&"is-valid",u&&"is-invalid","color"===r&&`${e}-color`)})}));j.displayName="FormControl";var y=Object.assign(j,{Feedback:b});const p=["as","disabled"];function x({tagName:e,disabled:r,href:n,target:t,rel:a,onClick:o,tabIndex:l=0,type:s}){e||(e=null!=n||null!=t||null!=a?"a":"button");const i={tagName:e};if("button"===e)return[{type:s||"button",disabled:r},i];const d=t=>{(r||"a"===e&&function(e){return!e||"#"===e.trim()}(n))&&t.preventDefault(),r?t.stopPropagation():null==o||o(t)};return"a"===e&&(n||(n="#"),r&&(n=void 0)),[{role:"button",disabled:void 0,tabIndex:r?void 0:l,href:n,target:"a"===e?t:void 0,"aria-disabled":r||void 0,rel:"a"===e?a:void 0,onClick:d,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),d(e))}},i]}const g=s.forwardRef(((e,r)=>{let{as:n,disabled:a}=e,o=function(e,r){if(null==e)return{};var n,t,a={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)>=0||(a[n]=e[n]);return a}(e,p);const[l,{tagName:s}]=x(Object.assign({tagName:n,disabled:a},o));return(0,t.jsx)(s,Object.assign({},o,l,{ref:r}))}));g.displayName="Button";const N=s.forwardRef((({as:e,bsPrefix:r,variant:n,size:a,active:o,className:l,...s},i)=>{const u=(0,v.vE)(r,"btn"),[c,{tagName:m}]=x({tagName:e,...s}),f=m;return(0,t.jsx)(f,{...c,...s,ref:i,className:d()(l,u,o&&"active",n&&`${u}-${n}`,a&&`${u}-${a}`,s.href&&s.disabled&&"disabled")})}));N.displayName="Button",N.defaultProps={variant:"primary",active:!1,disabled:!1};var _=N;var S=s.forwardRef((({bsPrefix:e,className:r,striped:n,bordered:a,borderless:o,hover:l,size:s,variant:i,responsive:u,...c},m)=>{const f=(0,v.vE)(e,"table"),b=d()(r,f,i&&`${f}-${i}`,s&&`${f}-${s}`,n&&`${f}-striped`,a&&`${f}-bordered`,o&&`${f}-borderless`,l&&`${f}-hover`),h=(0,t.jsx)("table",{...c,className:b,ref:m});if(u){let e=`${f}-responsive`;return"string"===typeof u&&(e=`${e}-${u}`),(0,t.jsx)("div",{className:e,children:h})}return h})),C=n(6136),w=n.n(C);function k(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function O(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function $(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){O(e,r,n[r])}))}return e}function z(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,a,o=[],l=!0,s=!1;try{for(n=n.call(e);!(l=(t=n.next()).done)&&(o.push(t.value),!r||o.length!==r);l=!0);}catch(i){s=!0,a=i}finally{try{l||null==n.return||n.return()}finally{if(s)throw a}}return o}}(e,r)||P(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||P(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,r){if(e){if("string"===typeof e)return k(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,r):void 0}}function E(e){var r=e.sum,n=e.numStudents-Object.values(r).reduce((function(e,r){return e+r}),0);return(0,t.jsxs)(t.Fragment,{children:[["diamond","gold","silver","bronze"].map((function(e){return(0,t.jsxs)("div",{className:w().medalSummary,children:[(0,t.jsx)(a.h,{color:(0,o.Cj)(e),size:20}),"\xa0",r[e]]},e)})),(0,t.jsxs)("div",{className:w().medalSummary,children:[(0,t.jsx)(a.h,{color:"#555",size:20}),"\xa0",r.none]}),(0,t.jsxs)("div",{className:w().medalSummary,children:[(0,t.jsx)(a.h,{color:"#eee",size:20}),"?\xa0",n]})]})}function I(e){var r=e.taskGraph,n=(0,s.useState)(""),i=n[0],d=n[1],u=(0,s.useState)({}),c=u[0],m=u[1],f=(0,s.useState)({}),b=f[0],h=f[1],v=A(new Set(i.split("\n").map((function(e){return e.trim()})).filter((function(e){return""!==e})))),j={},p={diamond:0,gold:0,silver:0,bronze:0,none:0},x=0,g=!0,N=!1,C=void 0;try{for(var k,P=Object.values(b)[Symbol.iterator]();!(g=(k=P.next()).done);g=!0){var I=k.value,B=0,T=!0,F=!1,R=void 0;try{for(var D,G=Object.entries(I)[Symbol.iterator]();!(T=(D=G.next()).done);T=!0){var U=z(D.value,2),Q=U[0],V=U[1];Q in j||(j[Q]={diamond:0,gold:0,silver:0,bronze:0,none:0}),"diamond"===V.badge||"gold"===V.badge||"silver"===V.badge||"bronze"===V.badge?j[Q][V.badge]+=1:(j[Q].none+=1,B+=1)}}catch(K){F=!0,R=K}finally{try{T||null==G.return||G.return()}finally{if(F)throw R}}var X=(0,o.Pb)(I);"diamond"===X||"gold"===X||"silver"===X||"bronze"===X?p[X]+=1:p.none+=1,1===B&&(x+=1)}}catch(K){N=!0,C=K}finally{try{g||null==P.return||P.return()}finally{if(N)throw C}}return(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:w().title,children:"Bulk"}),(0,t.jsx)(y,{as:"textarea",placeholder:"Inserisci la lista di username, uno per riga",onChange:function(e){return d(e.target.value)},value:i,className:w().usernames}),(0,t.jsx)(_,{onClick:function(){return function(){h({}),m({});var e=!0,n=!1,t=void 0;try{for(var a,s=function(e,n){var t=n.value;(0,l.b)(t).then((function(e){return e&&m((function(r){return $({},r,O({},e.username,e))})),e?(0,o.Yf)(r,e,!1):null})).then((function(e){e&&h((function(r){return $({},r,O({},t,e))}))}))},i=v[Symbol.iterator]();!(e=(a=i.next()).done);e=!0)s(0,a)}catch(K){n=!0,t=K}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}}()},children:"Via!"}),(0,t.jsx)("hr",{}),Object.entries(b).length>0&&(0,t.jsxs)(S,{striped:!0,hover:!0,responsive:!0,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{}),(0,t.jsx)("th",{children:"Username"}),(0,t.jsx)("th",{className:w().totalColumn,children:"Total"}),r.nodes.map((function(e){return(0,t.jsx)("th",{className:w().badgeColumn,children:(0,t.jsx)("code",{children:e.id})},e.id)}))]})}),(0,t.jsxs)("tbody",{children:[v.map((function(e,n){return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:n+1}),(0,t.jsx)("td",{children:(0,t.jsxs)("a",{href:"/?impersonate=".concat(e),target:"_blank",rel:"noreferrer",children:[(0,t.jsx)("code",{children:e})," ",e in c&&(0,t.jsxs)("em",{children:["(",c[e].first_name," ",c[e].last_name,")"]})]})}),e in b?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("td",{className:w().totalColumn,children:(0,t.jsx)(a.h,{color:(0,o.Cj)((0,o.Pb)(b[e]))})}),r.nodes.map((function(r){return(0,t.jsx)("td",{className:w().badgeColumn,children:(0,t.jsx)(a.h,{color:(0,o.Cj)(b[e][r.id].badge)})},r.id)}))]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("td",{className:w().totalColumn,children:"?"}),r.nodes.map((function(e){return(0,t.jsx)("td",{className:w().badgeColumn,children:"?"},e.id)}))]})]},e)})),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{}),(0,t.jsx)("td",{}),(0,t.jsxs)("td",{className:w().totalColumn,children:[(0,t.jsx)(E,{numStudents:v.length,sum:p}),(0,t.jsx)("hr",{}),(0,t.jsxs)("div",{className:w().medalSummary,children:[(0,t.jsxs)("abbr",{title:"At least bronze",children:["\u2265",(0,t.jsx)(a.h,{color:(0,o.Cj)("bronze"),size:20})," "]}),p.diamond+p.gold+p.silver+p.bronze]}),(0,t.jsxs)("div",{className:w().medalSummary,children:[(0,t.jsxs)("abbr",{title:"At most one badge from bronze",children:["~",(0,t.jsx)(a.h,{color:(0,o.Cj)("bronze"),size:20})," "]}),p.diamond+p.gold+p.silver+p.bronze+x]})]}),r.nodes.map((function(e){return(0,t.jsx)("td",{className:w().badgeColumn,children:(0,t.jsx)(E,{numStudents:v.length,sum:j[e.id]})},e.id)}))]})]})]})]})}var B=!0;function T(e){var r=e.taskGraph;return(0,t.jsx)(I,{taskGraph:r})}},6136:function(e){e.exports={title:"Bulk_title__A_7Np",usernames:"Bulk_usernames__N8p9U",badgeColumn:"Bulk_badgeColumn__cQCAf",totalColumn:"Bulk_totalColumn__Q4ymg",medalSummary:"Bulk_medalSummary__xrmLs"}}},function(e){e.O(0,[592,499,774,888,179],(function(){return r=7137,e(e.s=r);var r}));var r=e.O();_N_E=r}]);